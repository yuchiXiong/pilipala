<%= provide :title, "#{@blog.title} - #{WebSetting::APP_NAME}" %>

<!-- 回到顶部 -->
<%= render 'shared/to_top_btn' %>
<!-- 左侧悬浮点赞评论 -->
<%= render 'ugc', blog: @blog %>

<%= provide :left_slot do %>
  <h3 class="text-3xl"><%= @blog.title %></h3>
  <p class="flex flex-row my-1">
    <small class="text-gray-400 text-xs">发布于 <%= @blog.created_at.to_s(:db) %></small>
    <small class="ml-2 text-gray-400 flex flex-row justify-center text-xs">
      <svg t="1631348020604" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2218" width="18" height="18">
        <path d="M509.618 415.795c-42.695 0-77.253 38.372-77.253 85.738 0 47.352 34.558 86.22 77.253 86.22 42.667 0 76.716-38.867 76.716-86.22 0-47.352-34.049-85.738-76.716-85.738z m1.9-177.9c-211.548 0-383.265 159.859-383.265 274.587 0 114.727 171.717 273.624 383.266 273.624 212.484 0 384.227-162.522 384.227-273.624 0-111.088-171.743-274.587-384.227-274.587z m-1.446 452.006c-89.7 0-162.134-81.71-162.134-181.903 0-101.157 72.435-182.397 162.134-182.397 90.183 0 163.1 81.241 163.1 182.397 0 100.206-72.917 181.903-163.1 181.903z" p-id="2219">
        </path>
      </svg>
      <span class="ml-1"><%= @blog.reads_count %></span>
    </small>
  </p>
  <%= render @blog.user, be_visited_user: @blog.user %>
  <%= sanitize render_markdown(@blog.content) %>

  <hr class="my-6 border-gray-200" />

  <section class="w-full">
    <h4 class="text-lg font-semibold">评论</h4>
    <small>共有 <span><%= @blog.comments_count %></span> 条评论</small>
    <%= render 'comments/comment_input', blog: @blog, comment: @comment %>
    <hr class="my-6 border-gray-200" />
    <ul>
      <%= render @blog.comments.includes(:user, :sub_comments).where(comment_id: nil) %>
    </ul>
  </section>
<% end %>
<%= provide :right_slot do %>
  <div>
    <h4>目录</h4>
  </div>
  <section>
    <h4>作者的其它博客</h4>
    <ul>
      <%= link_to @blog.title.truncate(20), blog_url(@blog.id) %>
    </ul>
  </section>
<% end %>
